package com.pkart.controller;

import java.util.List;
import java.util.Scanner;

import com.pkart.dao.ICartDao;
import com.pkart.model.Customer;
import com.pkart.model.Product;
import com.pkart.service.CartServiceImpl;
import com.pkart.service.CustomerServiceImp;
import com.pkart.service.ICartService;
import com.pkart.service.ICustomerService;
import com.pkart.service.IProductService;
import com.pkart.service.ProductServiceImpl;

public class CustomerController {

	private static ICustomerService customerService;
	private static IProductService productService;
	private static ICartService cartService;

	public CustomerController() {

		if (null == customerService) {
			customerService = new CustomerServiceImp();
			productService = new ProductServiceImpl();
			cartService = new CartServiceImpl();
		}
	}

	public static void operations() {

		Scanner scanner = new Scanner(System.in);
		boolean status = true;
		while (status) {
			System.out.println("------Customer Operations----");

			System.out.println("1.Update Profile \n 2.View profile \n 3. View Products \n 4. View Cart \n 3.Exit");
			System.out.println("Enter the choice:");
			int choice = scanner.nextInt();

			switch (choice) {

			case 1:
				System.out.println("enter customer id, name,email, phone, address, password");
				int id = scanner.nextInt();
				String name = scanner.next();
				String email = scanner.next();
				long phone = scanner.nextLong();
				String address = scanner.next();
				int password = scanner.nextInt();

				Customer c= new Customer(id,name,email,phone,address,password);

				if (customerService.register(c)) {
					System.out.println("Customer regestered successfully.");
				} else {
					System.out.println("Customer not registerd.");
				}
				break;

			case 2:
				System.out.println("enter customer id:");
				id = scanner.nextInt();
				Customer customer = customerService.viewProfile(id);
				System.out.println(customer);
				break;
				
				
			case 3:
				List<Product> allProducts = productService.getAllProducts();

				for (Product prod : allProducts) {
					System.out.println(prod);
				}
				System.out.println("Enter your ID to add to cart");
				id= scanner.nextInt();
				System.out.println("Enter Product ID to add to cart");
				int pid = scanner.nextInt();
				if (cartService.addItem(id, productService.getProduct(pid))==true) {
					System.out.println("your Product is added to cart"+productService.getProduct(pid).toString());
				}
					
				
				break;

			case 4:
				System.out.println("Exiting admin operations..!");
				status = false;

			}

		}

	}

}
